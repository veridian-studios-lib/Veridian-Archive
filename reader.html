<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Veridian Archive | The Masterpiece Reader</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Fauna+One&display=swap" rel="stylesheet">
    <style>
        :root { --oak: #1A1108; --gold: #D4AF37; --paper: #F3F0E6; --ink: #1F150D; }
        body { 
            font-family: 'Fauna One', serif; background-color: #0F0A05; 
            margin: 0; overflow: hidden; display: flex; align-items: center; justify-content: center; height: 100vh;
        }

        /* 3D Scene Setup */
        .scene {
            perspective: 2500px;
            width: 100%;
            display: flex;
            justify-content: center;
        }

        .book {
            position: relative;
            width: 900px; /* Total spread width */
            height: 600px;
            transform-style: preserve-3d;
            transition: transform 0.5s;
        }

        /* The Pages */
        .page {
            position: absolute;
            width: 450px;
            height: 100%;
            top: 0;
            background: var(--paper);
            transform-origin: left;
            transition: transform 1.2s cubic-bezier(0.645, 0.045, 0.355, 1);
            transform-style: preserve-3d;
            box-shadow: inset 3px 0 20px rgba(0,0,0,0.1);
            cursor: pointer;
            padding: 50px;
            border-radius: 0 5px 5px 0;
        }

        .page-left {
            left: 0;
            z-index: 1;
            border-radius: 5px 0 0 5px;
            background: linear-gradient(to right, #e0ddd0 0%, var(--paper) 15%);
        }

        /* Flipping Logic */
        .flipping { transform: rotateY(-180deg); z-index: 10 !important; }

        /* Content Styling */
        .content-text { color: var(--ink); line-height: 2.2; font-style: italic; font-size: 1.25rem; }
        .lux-header { font-family: 'Cinzel'; font-size: 0.7rem; letter-spacing: 0.4em; color: rgba(0,0,0,0.4); margin-bottom: 2rem; }

        /* Refined Controls */
        .gold-nav {
            position: fixed;
            bottom: 40px;
            display: flex;
            gap: 60px;
            align-items: center;
        }
        .nav-icon {
            color: var(--gold);
            font-size: 1.5rem;
            opacity: 0.5;
            transition: 0.3s;
            background: none;
            border: none;
            cursor: pointer;
        }
        .nav-icon:hover { opacity: 1; transform: scale(1.1); }
        .play-ring {
            width: 70px; height: 70px; border: 1px solid var(--gold); border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
        }
    </style>
</head>
<body>

    <div class="scene">
        <div class="book" id="archive-book">
            <div class="page page-left">
                <div class="lux-header">PREVIOUS THOUGHT</div>
                <div id="left-text" class="content-text opacity-40">...</div>
            </div>

            <div class="page" id="right-page" style="right:0; z-index: 5;">
                <div class="lux-header">CURRENT WISDOM</div>
                <div id="right-text" class="content-text">Initializing the archive...</div>
            </div>
        </div>
    </div>

    <div class="gold-nav">
        <button onclick="prevPage()" class="nav-icon">◁</button>
        <div class="play-ring">
            <button onclick="toggleNarrator()" id="master-play" class="nav-icon" style="opacity:1">▶</button>
        </div>
        <button onclick="nextPage()" class="nav-icon">▷</button>
    </div>

    <script>
        const wisdom = [
            "A reader lives a thousand lives before he dies. The man who never reads lives only one.",
            "Wisdom is not a product of schooling but of the lifelong attempt to acquire it.",
            "In the sanctuary of silence, the soul finds its rhythm and the mind finds its peace.",
            "Nature does not hurry, yet everything is accomplished. Be like the oak.",
            "The golden path is paved with the words of those who walked before us."
        ];

        let currentPage = 0;
        let isSpeaking = false;
        const synth = window.speechSynthesis;

        function updatePageContent() {
            document.getElementById('right-text').innerText = wisdom[currentPage];
            document.getElementById('left-text').innerText = currentPage > 0 ? wisdom[currentPage - 1] : "The beginning of silence.";
        }

        function nextPage() {
            if (currentPage >= wisdom.length - 1) return;
            
            const p = document.getElementById('right-page');
            p.classList.add('flipping');
            playCrispySound();

            setTimeout(() => {
                currentPage++;
                updatePageContent();
                p.classList.remove('flipping');
                if(isSpeaking) speak();
            }, 600);
        }

        function prevPage() {
            if (currentPage <= 0) return;
            currentPage--;
            updatePageContent();
            playCrispySound();
        }

        function toggleNarrator() {
            if (isSpeaking) {
                synth.cancel();
                document.getElementById('master-play').innerText = "▶";
            } else {
                document.getElementById('master-play').innerText = "‖";
                speak();
            }
            isSpeaking = !isSpeaking;
        }

        function speak() {
            synth.cancel();
            const utter = new SpeechSynthesisUtterance(wisdom[currentPage]);
            utter.pitch = 0.65; // Grave/Deep
            utter.rate = 0.85; // Elegant/Slow
            
            utter.onend = () => {
                if (isSpeaking && currentPage < wisdom.length - 1) {
                    setTimeout(nextPage, 1000);
                }
            };
            synth.speak(utter);
        }

        function playCrispySound() {
            const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            const bufferSize = audioCtx.sampleRate * 0.3;
            const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
            const data = buffer.getChannelData(0);
            for (let i = 0; i < bufferSize; i++) { data[i] = Math.random() * 2 - 1; }
            const noise = audioCtx.createBufferSource();
            noise.buffer = buffer;
            const filter = audioCtx.createBiquadFilter();
            filter.type = 'highpass'; filter.frequency.value = 1500;
            const gain = audioCtx.createGain();
            gain.gain.setValueAtTime(0.04, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
            noise.connect(filter); filter.connect(gain); gain.connect(audioCtx.destination);
            noise.start();
        }

        updatePageContent();
    </script>
</body>
</html>
